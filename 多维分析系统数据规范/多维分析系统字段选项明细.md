# 📊 车险数据字段分类与筛选项清单

**版本**: 2025-09-15 （更新版）
**数据源**: data4dash 重构后数据
**用途**: 为前端筛选组件、BI工具和数据分析提供字段类型定义与可选项枚举
**配合文档**: 数据结构说明.md、数据样例与使用说明.md  

---

## 一、可筛选维度字段（枚举/布尔/低基数数值）

为减少垂直滚动，以下以“紧凑表格”统一呈现字段类型、选项数与选项摘要：

| 序号 | 名称 | Key | 类型 | 选项数 | 选项摘要 |
| --- | --- | --- | --- | --- | --- |
| 1 | 业务类型分类 | `business_type_category` | categorical | 16 | 10吨以上-普货、10吨以上-牵引、2-9吨营业货车、2吨以下营业货车、9-10吨营业货车、其他、出租车、摩托车、特种车、网约车、自卸、非营业客车新车、非营业客车旧车过户车、非营业客车旧车非过户、非营业货车新车、非营业货车旧车 |
| 2 | 机构层级 | `chengdu_branch` | categorical | 2 | 中支、成都 |
| 3 | 三级机构/城市 | `third_level_organization` | categorical | 13 | 乐山、天府、宜宾、德阳、新都、本部、武侯、泸州、自贡、资阳、达州、青羊、高新 |
| 4 | 客户三级分类 | `customer_category_3` | categorical | 11 | 挂车、摩托车、特种车、营业公路客运、营业出租租赁、营业城市公交、营业货车、非营业个人客车、非营业企业客车、非营业机关客车、非营业货车 |
| 5 | 险种类型 | `insurance_type` | categorical | 2 | 交强险、商业保险 |
| 6 | 是否新能源车 | `is_new_energy_vehicle` | boolean | 2 | False、True |
| 7 | 险别组合 | `coverage_type` | categorical | 3 | 主全、交三、单交 |
| 8 | 是否过户车 | `is_transferred_vehicle` | boolean | 2 | False、True |
| 9 | 新续转状态 | `renewal_status` | categorical | 3 | 新保、续保、转保 |
| 10 | 车险分等级 | `vehicle_insurance_grade` | categorical | 8 | A、B、C、D、E、F、G、X |
| 11 | 高速风险等级 | `highway_risk_grade` | categorical | 6 | A、B、C、D、E、X |
| 12 | 大货车评分 | `large_truck_score` | categorical | 6 | A、B、C、D、E、X |
| 13 | 小货车评分 | `small_truck_score` | categorical | 6 | A、B、C、D、E、X |
| 14 | 终端来源 | `terminal_source` | categorical | 7 | 0101柜面、0105微信（WeChat）、0106移动展业(App)、0107B2B、0110融合销售、0201PC、0202APP |
| 15 | 起保年度 | `policy_start_year` | numeric_category | 2+ | 2024、2025（支持未来年度自动扩展） |
| 16 | 周序号 | `week_number` | numeric_category | 1-53 | 实际：28、29、30、31、33、34、35、36（缺第32周） |

注：
- 起保年度支持未来年度自动扩展；
- 周序号理论范围为1-53周。

## 二、绝对值存储字段（用于聚合计算）

### 保费类（单位：元）
- **签单保费** | `signed_premium_yuan` | numeric | 元（已转换）
- **满期保费** | `matured_premium_yuan` | numeric | 元（已转换）
- **商业险折前保费** | `commercial_premium_before_discount_yuan` | numeric | 元

### 数量类（单位：件）
- **保单件数** | `policy_count` | numeric | 件（每行=1件）
- **赔案件数** | `claim_case_count` | numeric | 件

### 赔款类（单位：元）
- **已报告赔款** | `reported_claim_payment_yuan` | numeric | 元（已转换）

## 三、计算字段（实时计算，不存储）

### 平均值类
- **单均保费** | `average_premium_per_policy_yuan` | 元/件 | signed_premium_yuan ÷ policy_count
- **案均赔款** | `average_claim_payment_yuan` | 元/件 | reported_claim_payment_yuan ÷ claim_case_count

### 比率类（百分比）
- **满期出险率** | `claim_frequency_percent` | % | (claim_case_count ÷ policy_count) × 100
- **满期赔付率** | `expired_loss_ratio_percent` | % | (reported_claim_payment_yuan ÷ matured_premium_yuan) × 100
- **费用率** | `expense_ratio_percent` | % | (expense_amount_yuan ÷ signed_premium_yuan) × 100
- **变动成本率** | `variable_cost_ratio_percent` | % | ((expense_amount_yuan + reported_claim_payment_yuan) ÷ signed_premium_yuan) × 100

### 系数类
- **商业险自主定价系数** | `commercial_auto_underwriting_factor` | 系数 | signed_premium_yuan ÷ commercial_premium_before_discount_yuan

---

## 四、日期/时间字段

- **数据快照日期** | `snapshot_date` | date | 日期格式

---

## 五、应用建议

### 🎯 **前端筛选组件设计**
- **下拉选择器**: 适用于选项数≤20的分类字段（如险种类型、保障方案等）
- **多选框组**: 适用于选项数3-15的字段（如三级机构、客户分类等）
- **开关切换**: 适用于布尔字段（如是否新能源车、是否过户车）
- **级联选择**: 可将机构层级→三级机构设计为级联结构

### 📊 **BI工具配置**
- **维度字段**: 第一部分的17个字段均可作为切片维度
- **绝对值度量**: 第二部分的9个绝对值字段用于聚合计算
- **计算度量**: 第三部分的7个字段需要通过代码计算获得
- **时间维度**: snapshot_date、policy_start_year、week_number作为时间轴
- **重要**: 避免直接聚合计算字段，必须先聚合绝对值再重新计算比率

### 🔍 **数据质量监控**
- **空值处理**: 车险评级、高速风险等级、小货车评分存在空值，需在前端显示为"未评级"
- **数据一致性**: 数据涵盖2024-2025年第28-36周（缺第32周），选项列表基于实际数据生成
- **异常值检测**: 评级字段应仅包含A-G、X等标准值
- **单位统一**: 所有金额字段已统一为元单位，时间已统一为年+周格式

### 💡 **性能优化建议**
- **索引策略**: 为高频筛选字段（如机构、险种、客户分类）建立复合索引
- **缓存策略**: 选项列表变化频率低，可在应用层缓存24小时
- **分页加载**: 对于大数据量查询，建议按机构或时间范围分页

---

**📝 备注**
- 本文档基于data4dash重构后数据生成，涵盖2024-2025年度数据
- 字段分类遵循数据重构后的标准：筛选维度 + 绝对值存储 + 实时计算
- 选项列表基于实际数据枚举，支持未来年度自动扩展
- 配合使用：数据结构说明.md、数据样例与使用说明.md、计算公式代码示例
- 建议定期重新扫描数据以更新选项列表，特别是新年度数据导入时